<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stärke Merge Battle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1e1e2f;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding-top: 20px;
    }
    #game {
      display: flex;
      gap: 15px;
      margin: 20px 0;
      flex-wrap: wrap;
      justify-content: center;
    }
    .enemy, .item, .boss {
      background: #333;
      padding: 20px;
      border-radius: 10px;
      cursor: pointer;
      text-align: center;
      transition: transform 0.2s;
      width: 100px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    .enemy:hover, .item:hover, .boss:hover {
      transform: scale(1.1);
      background: #444;
    }
    .dead {
      opacity: 0.4;
      pointer-events: none;
    }
    .x2 { background: #2e8b57; color: #fff; font-weight: bold; }
    .minus5 { background: #8b0000; color: #fff; font-weight: bold; }
    .random { background: #1e90ff; color: #fff; font-weight: bold; }
    .boss { background: #ff8c00; color: black; font-weight: bold; border: 2px solid gold; }
    #log {
      max-height: 200px;
      overflow-y: auto;
      background: #111;
      padding: 10px;
      width: 300px;
      border-radius: 5px;
      box-shadow: inset 0 0 10px #000;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      border: none;
      background: #444;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      box-shadow: 0 0 5px rgba(255,255,255,0.2);
    }
    button:hover {
      background: #666;
    }
    #stats {
      margin-top: 20px;
      color: #ccc;
    }
  </style>
</head>
<body>
  <h1>Stärke Merge Battle</h1>
  <h2>Level: <span id="levelNumber">1</span></h2>
  <h3 id="debuffText"></h3>
  <p>Deine Stärke: <span id="playerLevel">5</span></p>
  <div id="game"></div>
  <div id="log"></div>
  <button id="nextLevelBtn" style="display:none;">Nächstes Level starten</button>
  <div id="stats"></div>

  <script>
    let level = 1;
    let playerLevel = 5;
    let basePlayerLevel = 5;
    let debuff = 0;
    let enemies = [];
    let bossMode = false;
    let bossPhase = 0;
    let bossTargetLevel = Math.floor(Math.random() * 10) + 1;
    let totalEnemyStrength = 0;

    let stats = {
      levelBeendet: 0,
      powerupsGenutzt: 0,
      fallenGetroffen: 0,
      zufallGenutzt: 0,
      bosseBesiegt: 0
    };

    const gameDiv = document.getElementById('game');
    const playerLevelSpan = document.getElementById('playerLevel');
    const logDiv = document.getElementById('log');
    const levelNumberSpan = document.getElementById('levelNumber');
    const nextLevelBtn = document.getElementById('nextLevelBtn');
    const statsDiv = document.getElementById('stats');
    const debuffText = document.getElementById('debuffText');

    function log(msg) {
      logDiv.innerHTML += `<div>${msg}</div>`;
      logDiv.scrollTop = logDiv.scrollHeight;
    }

    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function generateBossWave() {
      const phaseCount = Math.floor(Math.random() * 3) + 3;
      const wave = [];
      if (bossPhase < phaseCount - 1) {
        const count = 3 + Math.floor(Math.random() * 3);
        let valid = false;
        while (!valid) {
          wave.length = 0;
          for (let i = 0; i < count; i++) {
        let val = Math.floor(base * 0.8 + Math.random() * (level * 2));
        list.push({ type: 'enemy', level: val });
      }
      if (ensureWeaker && !list.some(e => e.level < base)) {
        list[0].level = Math.max(0, base - 1);
      }
      }
      if (Math.random() < 0.2) list.push({ type: 'item', effect: 'x2', required: false });
      if (Math.random() < 0.4) list.push({ type: 'item', effect: '-5', required: true });
      if (Math.random() < 0.3) list.push({ type: 'item', effect: 'random', required: false });
      shuffleArray(list);
      list.forEach((e, i) => e.id = i);
      return list;
    }

    // Hier würde der restliche Spielcode folgen (Rendering, Interaktionen, Logik)
  </script>
</body>
</html>
